<template>
  <button role="button" aria-label="Vaihda tumman ja vaalean väriteeman välillä" @click.prevent="toggleTheme"
    class="toggle-theme">

    <svg v-if="darkTheme" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M17 15C18.6569 15 20 13.6569 20 12C20 10.3431 18.6569 9 17 9C15.3431 9 14 10.3431 14 12C14 13.6569 15.3431 15 17 15Z"
        fill="currentColor" />
      <path fill-rule="evenodd" clip-rule="evenodd"
        d="M0 12C0 8.13401 3.13401 5 7 5H17C20.866 5 24 8.13401 24 12C24 15.866 20.866 19 17 19H7C3.13401 19 0 15.866 0 12ZM7 7H17C19.7614 7 22 9.23858 22 12C22 14.7614 19.7614 17 17 17H7C4.23858 17 2 14.7614 2 12C2 9.23858 4.23858 7 7 7Z"
        fill="currentColor" />
    </svg>

    <svg v-else width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path
        d="M7 15C5.34315 15 4 13.6569 4 12C4 10.3431 5.34315 9 7 9C8.65685 9 10 10.3431 10 12C10 13.6569 8.65685 15 7 15Z"
        fill="currentColor" />
      <path fill-rule="evenodd" clip-rule="evenodd"
        d="M24 12C24 8.13401 20.866 5 17 5H7C3.13401 5 0 8.13401 0 12C0 15.866 3.13401 19 7 19H17C20.866 19 24 15.866 24 12ZM17 7H7C4.23858 7 2 9.23858 2 12C2 14.7614 4.23858 17 7 17H17C19.7614 17 22 14.7614 22 12C22 9.23858 19.7614 7 17 7Z"
        fill="currentColor" />
    </svg>


  </button>
</template>

<script>
export default {
  data() {
    return {
      darkTheme: false
    }
  },
  methods: {
    toggleTheme() {
      this.darkTheme = !this.darkTheme

      // This is using a script that is added in index.html
      window.__setPreferredTheme(
        this.darkTheme ? 'dark' : 'light'
      )
    }
  },
  mounted() {
    if (window.__theme == 'dark') this.darkTheme = true
  }
}
</script>

<style lang="scss">
.toggle-theme {
  background-color: transparent;
  border: 0;
  color: var(--color-paragraph);
  cursor: pointer;
  padding: 1rem;
  display: flex;
  align-items: center;

  &:hover {
    opacity: .8
  }
}

.toggle-theme.hide-mobile-hamburger svg {
  color: var(--color-white);
}

.toggle-theme-text {
  margin-right: 0.5rem;
}

@media (max-width: 480px) {
  .toggle-theme {
    padding: 1rem 0;
  }
}
</style>